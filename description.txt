# å­¦ç”Ÿå…¬å¯“äº¤è´¹ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºFlaskæ¡†æ¶çš„å­¦ç”Ÿå…¬å¯“äº¤è´¹ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨MVCæ¶æ„è®¾è®¡ï¼Œå®ç°äº†å­¦ç”Ÿä¿¡æ¯ç®¡ç†ã€å…¬å¯“æ¥¼ç®¡ç†ã€å¯å®¤ç®¡ç†ã€äº¤è´¹è®°å½•ç®¡ç†ã€ç»Ÿè®¡æŠ¥è¡¨å’Œç”¨æˆ·æƒé™ç®¡ç†ç­‰åŠŸèƒ½ã€‚

### æŠ€æœ¯æ ˆ
- **åç«¯**: Python 3.7+ + Flask
- **å‰ç«¯**: HTML5 + CSS3 + Bootstrap 5 + JavaScript
- **æ•°æ®åº“**: MySQL 5.7+
- **æ¶æ„**: MVCæ¨¡å¼

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### 1.1 å®‰è£…Python
ç¡®ä¿å®‰è£…äº†Python 3.7æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š
```bash
python --version  # åº”è¯¥æ˜¾ç¤º Python 3.7+
```

#### 1.2 å®‰è£…MySQL
å®‰è£…MySQL 5.7æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¹¶å¯åŠ¨MySQLæœåŠ¡ã€‚

#### 1.3 å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„ï¼š
```
dorm_management/
â”œâ”€â”€ app.py              # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ database.sql        # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ templates/          # HTMLæ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”œâ”€â”€ students.html
â”‚   â”œâ”€â”€ buildings.html
â”‚   â”œâ”€â”€ rooms.html
â”‚   â”œâ”€â”€ payments.html
â”‚   â”œâ”€â”€ reports.html
â”‚   â””â”€â”€ users.html
â””â”€â”€ README.md          # æœ¬æ–‡æ¡£
```

---

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 2.1 å®‰è£…Pythonä¾èµ–

åˆ›å»º `requirements.txt` æ–‡ä»¶ï¼š
```txt
Flask==2.3.3
Flask-MySQLdb==1.0.1
mysqlclient==2.2.0
Werkzeug==2.3.7
```

å®‰è£…ä¾èµ–ï¼š
```bash
# æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**æ³¨æ„**ï¼šå¦‚æœåœ¨Windowsä¸Šå®‰è£… `mysqlclient` é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. ä¸‹è½½é¢„ç¼–è¯‘çš„wheelæ–‡ä»¶ï¼šhttps://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient
2. ä½¿ç”¨ pip å®‰è£…ï¼š`pip install mysqlclient-xxx.whl`

### 2.2 åˆ›å»ºæ•°æ®åº“

ç™»å½•MySQLï¼š
```bash
mysql -u root -p
```

æ‰§è¡Œæ•°æ®åº“è„šæœ¬ï¼ˆä½¿ç”¨æä¾›çš„ `database.sql` æ–‡ä»¶ï¼‰ï¼š
```bash
mysql -u root -p < database.sql
```

æˆ–è€…åœ¨MySQLå‘½ä»¤è¡Œä¸­ï¼š
```sql
source /path/to/database.sql
```

### 2.3 é…ç½®åº”ç”¨

ç¼–è¾‘ `app.py` æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®ï¼š

```python
# MySQLé…ç½®
app.config['MYSQL_HOST'] = 'localhost'      # æ•°æ®åº“ä¸»æœº
app.config['MYSQL_USER'] = 'root'           # æ•°æ®åº“ç”¨æˆ·å
app.config['MYSQL_PASSWORD'] = 'your_password'  # æ•°æ®åº“å¯†ç 
app.config['MYSQL_DB'] = 'dorm_management'  # æ•°æ®åº“åç§°
```

ä¿®æ”¹å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰ï¼š
```python
app.secret_key = 'your-secret-key-change-in-production'
```

### 2.4 è¿è¡Œåº”ç”¨

```bash
python app.py
```

åº”ç”¨å°†åœ¨ http://localhost:5000 å¯åŠ¨

---

## ğŸ‘¤ é»˜è®¤ç™»å½•è´¦å·

ç³»ç»Ÿé¢„è®¾äº†ä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š

| ç”¨æˆ·å | å¯†ç  | æƒé™ |
|--------|------|------|
| admin | admin123 | ç®¡ç†å‘˜ |
| teacher1 | admin123 | æ•™å¸ˆ |
| teacher2 | admin123 | æ•™å¸ˆ |

**âš ï¸ é‡è¦**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

---

## ğŸ“‚ ç›®å½•ç»“æ„è¯´æ˜

```
dorm_management/
â”‚
â”œâ”€â”€ app.py                    # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ æ•°æ®åº“æ“ä½œ
â”‚   â””â”€â”€ è®¤è¯å’Œæƒé™æ§åˆ¶
â”‚
â”œâ”€â”€ templates/                # HTMLæ¨¡æ¿ï¼ˆJinja2ï¼‰
â”‚   â”œâ”€â”€ base.html            # åŸºç¡€æ¨¡æ¿ï¼ˆå¯¼èˆªæ ã€æ ·å¼ï¼‰
â”‚   â”œâ”€â”€ login.html           # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ dashboard.html       # ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ students.html        # å­¦ç”Ÿç®¡ç†
â”‚   â”œâ”€â”€ buildings.html       # å…¬å¯“æ¥¼ç®¡ç†
â”‚   â”œâ”€â”€ rooms.html           # å¯å®¤ç®¡ç†
â”‚   â”œâ”€â”€ payments.html        # äº¤è´¹ç®¡ç†
â”‚   â”œâ”€â”€ reports.html         # ç»Ÿè®¡æŠ¥è¡¨
â”‚   â””â”€â”€ users.html           # ç”¨æˆ·ç®¡ç†
â”‚
â”œâ”€â”€ database.sql             # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ requirements.txt         # Pythonä¾èµ–æ¸…å•
â””â”€â”€ README.md               # æœ¬æ–‡æ¡£
```

---

## ğŸ”§ åŠŸèƒ½æ¨¡å—è¯´æ˜

### 1. ç”¨æˆ·è®¤è¯
- ç™»å½•/ç™»å‡º
- Sessionä¼šè¯ç®¡ç†
- å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆSHA256ï¼‰
- æƒé™éªŒè¯ï¼ˆç®¡ç†å‘˜/æ•™å¸ˆï¼‰

### 2. å­¦ç”Ÿä¿¡æ¯ç®¡ç†
- âœ… æ·»åŠ å­¦ç”Ÿä¿¡æ¯ï¼ˆå«éªŒè¯ï¼‰
- âœ… ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯
- âœ… åˆ é™¤å­¦ç”Ÿï¼ˆçº§è”åˆ é™¤äº¤è´¹è®°å½•ï¼‰
- âœ… å¤šæ¡ä»¶æœç´¢ï¼ˆå­¦å·ã€å§“åã€ä¸“ä¸šã€ç­çº§ï¼‰
- âœ… åˆ†é¡µæ˜¾ç¤º
- âœ… å¯å®¤åˆ†é…ï¼ˆè‡ªåŠ¨æ£€æŸ¥å®¹é‡ï¼‰

### 3. å…¬å¯“æ¥¼ç®¡ç†
- âœ… æ·»åŠ å…¬å¯“æ¥¼
- âœ… ç¼–è¾‘å…¬å¯“æ¥¼ä¿¡æ¯
- âœ… åˆ é™¤å…¬å¯“æ¥¼
- âœ… æŸ¥çœ‹æ¥¼æ ‹ç»Ÿè®¡ä¿¡æ¯

### 4. å¯å®¤ç®¡ç†
- âœ… æ·»åŠ å¯å®¤
- âœ… ç¼–è¾‘å¯å®¤ä¿¡æ¯
- âœ… åˆ é™¤å¯å®¤
- âœ… æŸ¥çœ‹å…¥ä½æƒ…å†µ
- âœ… å¯è§†åŒ–å…¥ä½ç‡
- âœ… æŒ‰å…¬å¯“æ¥¼ç­›é€‰

### 5. äº¤è´¹ç®¡ç†
- âœ… æ–°å¢äº¤è´¹è®°å½•
- âœ… åˆ é™¤äº¤è´¹è®°å½•
- âœ… å¤šæ¡ä»¶æŸ¥è¯¢ï¼ˆå­¦ç”Ÿã€ç±»å‹ã€æ—¥æœŸï¼‰
- âœ… äº¤è´¹ç»Ÿè®¡ï¼ˆæ€»é¢ã€ç¬”æ•°ï¼‰
- âœ… åˆ†é¡µæ˜¾ç¤º

### 6. ç»Ÿè®¡æŠ¥è¡¨
- âœ… å…¬å¯“æ¥¼æ”¶è´¹ç»Ÿè®¡
- âœ… ä¸“ä¸šæ”¶è´¹ç»Ÿè®¡
- âœ… æœˆåº¦æ”¶è´¹è¶‹åŠ¿å›¾ï¼ˆChart.jsï¼‰
- âœ… æ¬ è´¹å­¦ç”Ÿåˆ—è¡¨

### 7. ç”¨æˆ·ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
- âœ… æ·»åŠ ç³»ç»Ÿç”¨æˆ·
- âœ… ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯
- âœ… åˆ é™¤ç”¨æˆ·
- âœ… æƒé™ç®¡ç†

---

## ğŸ”’ å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰å¿…é¡»ï¼š

1. **ä¿®æ”¹å¯†é’¥**
   ```python
   app.secret_key = os.urandom(24).hex()  # ç”Ÿæˆéšæœºå¯†é’¥
   ```

2. **ä¿®æ”¹é»˜è®¤å¯†ç **
   - ç™»å½•åç«‹å³ä¿®æ”¹æ‰€æœ‰é»˜è®¤è´¦å·å¯†ç 

3. **å…³é—­è°ƒè¯•æ¨¡å¼**
   ```python
   if __name__ == '__main__':
       app.run(debug=False, host='0.0.0.0', port=5000)
   ```

4. **ä½¿ç”¨HTTPS**
   - é…ç½®SSLè¯ä¹¦
   - å¯ç”¨HTTPSè®¿é—®

5. **æ•°æ®åº“å®‰å…¨**
   - ä½¿ç”¨å¼ºå¯†ç 
   - é™åˆ¶æ•°æ®åº“è®¿é—®IP
   - å®šæœŸå¤‡ä»½æ•°æ®

6. **é˜²ç«å¢™é…ç½®**
   - ä»…å¼€æ”¾å¿…è¦ç«¯å£
   - é™åˆ¶è®¿é—®æ¥æº

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å®‰è£…mysqlclientå¤±è´¥
**A**: Windowsç”¨æˆ·å¯ä»¥ä¸‹è½½é¢„ç¼–è¯‘çš„wheelæ–‡ä»¶å®‰è£…ï¼š
```bash
pip install mysqlclient-xxx-cpxx-win_amd64.whl
```

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥
**A**: æ£€æŸ¥ä»¥ä¸‹é…ç½®ï¼š
1. MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ•°æ®åº“ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
3. æ•°æ®åº“æ˜¯å¦å·²åˆ›å»º
4. é˜²ç«å¢™æ˜¯å¦å…è®¸è¿æ¥

### Q3: é¡µé¢æ˜¾ç¤ºä¹±ç 
**A**: ç¡®ä¿æ•°æ®åº“ä½¿ç”¨UTF-8ç¼–ç ï¼š
```sql
ALTER DATABASE dorm_management CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### Q4: é™æ€èµ„æºåŠ è½½å¤±è´¥
**A**: æ£€æŸ¥CDNè¿æ¥ï¼Œç¡®ä¿ç½‘ç»œç•…é€šã€‚å¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°ï¼š
- Bootstrap CSS/JS
- Bootstrap Icons
- Chart.js

### Q5: ç«¯å£5000è¢«å ç”¨
**A**: ä¿®æ”¹ç«¯å£ï¼š
```python
app.run(debug=True, host='0.0.0.0', port=8080)
```

---

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

### ä¸»è¦è¡¨è¯´æ˜ï¼š

1. **buildings** - å…¬å¯“æ¥¼è¡¨
   - å­˜å‚¨å…¬å¯“æ¥¼åŸºæœ¬ä¿¡æ¯
   - ä¸»é”®ï¼šbuilding_id

2. **rooms** - å¯å®¤è¡¨
   - å­˜å‚¨å¯å®¤è¯¦ç»†ä¿¡æ¯
   - å¤–é”®ï¼šbuilding_id

3. **students** - å­¦ç”Ÿè¡¨
   - å­˜å‚¨å­¦ç”Ÿä¿¡æ¯
   - å¤–é”®ï¼šbuilding_id, room_id

4. **payments** - äº¤è´¹è¡¨
   - å­˜å‚¨äº¤è´¹è®°å½•
   - å¤–é”®ï¼šstudent_id, building_id, room_id

5. **users** - ç”¨æˆ·è¡¨
   - å­˜å‚¨ç³»ç»Ÿç”¨æˆ·
   - å¯†ç åŠ å¯†å­˜å‚¨

### è§†å›¾ï¼š
- **student_payment_summary** - å­¦ç”Ÿäº¤è´¹æ±‡æ€»
- **room_occupancy** - å¯å®¤å…¥ä½æƒ…å†µ

---

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### ä½¿ç”¨Gunicornï¼ˆæ¨èï¼‰

1. å®‰è£…Gunicornï¼š
```bash
pip install gunicorn
```

2. è¿è¡Œåº”ç”¨ï¼š
```bash
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

### ä½¿ç”¨Nginxåå‘ä»£ç†

nginxé…ç½®ç¤ºä¾‹ï¼š
```nginx
server {
    listen 80;
    server_name your_domain.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### ä½¿ç”¨Supervisorå®ˆæŠ¤è¿›ç¨‹

supervisoré…ç½®ç¤ºä¾‹ï¼š
```ini
[program:dorm_management]
command=/path/to/venv/bin/gunicorn -w 4 -b 127.0.0.1:5000 app:app
directory=/path/to/dorm_management
user=www-data
autostart=true
autorestart=true
```

---

## ğŸ“ å¼€å‘å’Œæ‰©å±•

### æ·»åŠ æ–°åŠŸèƒ½ï¼š

1. **æ·»åŠ æ–°è·¯ç”±**ï¼šåœ¨ `app.py` ä¸­å®šä¹‰æ–°çš„è·¯ç”±å‡½æ•°
2. **æ·»åŠ æ–°æ¨¡æ¿**ï¼šåœ¨ `templates/` ç›®å½•åˆ›å»ºæ–°çš„HTMLæ–‡ä»¶
3. **æ‰©å±•æ•°æ®åº“**ï¼šä¿®æ”¹ `database.sql`ï¼Œæ·»åŠ æ–°è¡¨æˆ–å­—æ®µ

### ä»£ç è§„èŒƒï¼š
- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å
- å®ç°é”™è¯¯å¤„ç†

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Pythonç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
2. æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
3. æ•°æ®åº“è¿æ¥é…ç½®æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹åº”ç”¨æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ‰ æ€»ç»“

æœ¬ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„å­¦ç”Ÿå…¬å¯“ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- âœ… å®Œæ•´çš„CRUDæ“ä½œ
- âœ… ç”¨æˆ·è®¤è¯å’Œæƒé™æ§åˆ¶
- âœ… æ•°æ®ç»Ÿè®¡å’Œå¯è§†åŒ–
- âœ… å“åº”å¼ç•Œé¢è®¾è®¡
- âœ… æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†

ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚æŒ‰ç…§æœ¬æ–‡æ¡£çš„æ­¥éª¤æ“ä½œï¼Œå³å¯å¿«é€Ÿéƒ¨ç½²å’Œè¿è¡Œç³»ç»Ÿã€‚

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸŠ